<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.chart.*?>
<?import javafx.geometry.Insets?>
<?import javafx.geometry.Pos?>

<VBox xmlns="http://javafx.com/javafx/16"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.controllers.AnalyticsController"
      spacing="20" styleClass="content-root"
      stylesheets="@../css/styles.css">

    <!-- PAGE TITLE + TYPE TOGGLE -->
    <HBox alignment="CENTER_LEFT" spacing="20" HBox.hgrow="ALWAYS">
        <Label text="Analytics" styleClass="page-title"/>
        <Pane HBox.hgrow="ALWAYS"/>
        <Label text="View:" style="-fx-text-fill: white; -fx-font-size: 14px;"/>
        <ToggleButton fx:id="incomeRadio" text="Income" prefWidth="100" styleClass="toggle-btn">
            <toggleGroup>
                <ToggleGroup fx:id="typeToggle"/>
            </toggleGroup>
        </ToggleButton>
        <ToggleButton fx:id="expenseRadio" text="Expense" prefWidth="100" styleClass="toggle-btn" toggleGroup="$typeToggle"/>
    </HBox>

    <!-- MAIN CHART AREA -->
    <HBox spacing="12" VBox.vgrow="ALWAYS">
        <!-- PIE CHART (LEFT - 40%) -->
        <VBox spacing="10" styleClass="glass-card" prefWidth="500" maxWidth="500">
            <padding><Insets top="16" right="16" bottom="16" left="16"/></padding>
            <Label text="By Category" styleClass="section-title"/>
            <PieChart fx:id="categoryPieChart" VBox.vgrow="ALWAYS" legendVisible="true" labelsVisible="true"/>
            <Label fx:id="percentageLabel" wrapText="true" style="-fx-text-fill: #FFFFFF; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 10 0 0 0; -fx-background-color: rgba(255, 255, 255, 0.05); -fx-background-radius: 5; -fx-padding: 10;"/>
        </VBox>

        <!-- RIGHT SIDE CHARTS (60%) -->
        <VBox spacing="12" HBox.hgrow="ALWAYS">
            <!-- LINE CHART (TOP) -->
            <VBox spacing="10" styleClass="glass-card" VBox.vgrow="ALWAYS">
                <padding><Insets top="16" right="16" bottom="16" left="16"/></padding>
                <Label text="Daily Trend" styleClass="section-title"/>
                <LineChart fx:id="trendLineChart" VBox.vgrow="ALWAYS">
                    <xAxis><CategoryAxis label="Day"/></xAxis>
                    <yAxis><NumberAxis label="Amount"/></yAxis>
                </LineChart>
            </VBox>

            <!-- BAR CHART (BOTTOM) -->
            <VBox spacing="10" styleClass="glass-card" VBox.vgrow="ALWAYS">
                <padding><Insets top="16" right="16" bottom="16" left="16"/></padding>
                <Label text="Category Breakdown" styleClass="section-title"/>
                <BarChart fx:id="categoryBarChart" VBox.vgrow="ALWAYS">
                    <xAxis><CategoryAxis label="Category"/></xAxis>
                    <yAxis><NumberAxis label="Amount"/></yAxis>
                </BarChart>
            </VBox>
        </VBox>
    </HBox>
</VBox>